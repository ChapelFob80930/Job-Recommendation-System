{% extends "base.html" %}
{% block content %}

<div class="home-page">
    <div class="hero-section">
        <div class="hero-content">
            <h1 class="hero-title">Find Your Dream Job with AI-Powered Matching</h1>
            <p class="hero-subtitle">Upload your resume and let our intelligent system connect you with the best opportunities.</p>
        </div>
    </div>

    <div class="upload-section">
        <form id="upload-form" method="POST" action="{{ url_for('upload') }}" enctype="multipart/form-data">
            <div id="drop-area">
                <p class="drop-message">Drag & Drop your PDF here or</p>
                <input type="file" id="fileElem" name="resume" accept=".pdf" required hidden>
                <label for="fileElem" class="browse-button">Browse Files</label>
                <p id="file-name" class="file-name"></p>
            </div>
            <button type="submit" class="upload-button">Upload Resume</button>
        </form>
    </div>

    <!-- Display Job Recommendations -->
    {% if recommendations %}
    <div class="recommendations-section">
        <h2>Your Job Recommendations</h2>
        <table class="table">
            <thead>
                <tr>
                    <th>Company</th>
                    <th>Job Title</th>
                    <th>Match Score</th>
                    <th>Missing Skills</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for rec in recommendations %}
                <tr>
                    <td><img src="{{ url_for('static', filename=rec.company_logo) }}" alt="{{ rec.company }}" class="company-logo"></td>
                    <td>{{ rec.job_title }}</td>
                    <td>{{ "%.2f"|format(rec.match_score) }}%</td>
                    <td>
                        {% for skill in rec.missing_skills.split(',') %}
                        <a href="#" class="skill-link">{{ skill.strip() }}</a>{% if not loop.last %}, {% endif %}
                        {% endfor %}
                    </td>
                    <td><a href="{{ url_for('job_details', job_id=rec.id) }}" class="btn btn-primary">View Details</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p>No job recommendations available.</p>
    {% endif %}
</div>

<link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
<script src="{{ url_for('static', filename='js/home.js') }}" defer></script>

{% endblock %}